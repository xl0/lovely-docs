[
  {
    "objectID": "sveltejs-svelte.html",
    "href": "sveltejs-svelte.html",
    "title": "sveltejs/svelte",
    "section": "",
    "text": "source = settings.sources[\"sveltejs/svelte\"]\nassert isinstance(source, GitSource)\n\nclone_repo(source)\nclone_dir = settings.git_dir / source.name\n\n\ndoc_dir_path = clone_dir / source.doc_dir\n\ndef get_files_from_fs(root):\n    files = []\n    for path in root.rglob('*'):\n        if path.is_file():\n            rel_path = path.relative_to(root)\n            depth = len(rel_path.parts) - 1\n            files.append((depth, str(rel_path)))\n    files.sort(key=lambda x: (x[0], x[1]))\n    return [f[1] for f in files]\n\nfiles = get_files_from_fs(doc_dir_path)\nfiles[:10]\n\n['index.md',\n '01-introduction/01-overview.md',\n '01-introduction/02-getting-started.md',\n '01-introduction/03-svelte-files.md',\n '01-introduction/04-svelte-js-files.md',\n '01-introduction/index.md',\n '02-runes/01-what-are-runes.md',\n '02-runes/02-$state.md',\n '02-runes/03-$derived.md',\n '02-runes/04-$effect.md']\n\n\n\nmodel = llm.get_async_model(settings.model)\nmodel.key = settings.api_key\n\n# await (await model.prompt(\"Reply with ok\")).text()\n\n\n# def wrap_doc(doc: str, name: str):\n#     return f\"\"\"\n# &lt;page {name}&gt;\n# {doc}\n# &lt;/page&gt;\n# \"\"\".strip()\n\n\n# with open(clone_dir / source.doc_dir / files[2]) as f:\n#     doc = f.read()\n#     wrapped = wrap_doc(doc, files[2])\n# # print(wrapped)\n\n\nclass ReplySchema(BaseModel):\n    better_filename: str\n    summary_markdown: str\n    short_summary_markdown: str\n    one_line_summary_txt: str\n    relevant: bool\n\n\n# prompt = f\"\"\"\n# Read this file, it's part of the documentation for a library. Then:\n# - Come up with a short filename that perfectly encompasses the contents. It's ok to keep the original if it's good already.\n# - Then write 3 versions of the summary:\n#   1. Extract bits that are important to a programmer. Don't include any extra notes. Be concise. One example per use case max.\n#   2. Shorter summary, keep only the most important bits.\n#   3. One-line summary of the file.\n# - Decide if the content of this file is relevant to a programmer who is already somewhat familiar with the library in question.\n\n# \\n{wrapped}\n# \"\"\"\n\n\n# res = await (await model.prompt(prompt=prompt, schema=ReplySchema))\n# r = ReplySchema.model_validate_json(await res.text())\n# print(r.better_filename)\n# print(r.summary_markdown)\n# print(r.short_summary_markdown)\n# print(r.one_line_summary_txt)\n# print(r.relevant)\n\n\n# await res.usage()\n\n\n# async def process_doc(filename: str) -&gt; tuple[ReplySchema, Usage]:\n#     with open(clone_dir / source.doc_dir / filename) as f:\n#         doc = f.read()\n#         wrapped = wrap_doc(doc, filename)\n\n#     prompt = f\"\"\"\n#     Read this file, it's part of the documentation for a library. Then:\n#     - Come up with a short filename that perfectly encompasses the contents. It's ok to keep the original if it's good already. Don't incluide the name of the library in the name.\n#     - Then write 3 versions of the summary:\n#     1. Extract bits that are important to a programmer. Don't include any extra notes. Be concise. One example per use case max.\n#     2. Shorter summary, keep only the most important bits.\n#     3. One-line summary of the file.\n#     - Decide if the content of this file is relevant to a programmer who is already somewhat familiar with the library in question.\n\n#     \\n{wrapped}\n#     \"\"\"\n\n#     res = await (await model.prompt(prompt=prompt, schema=ReplySchema))\n#     reply = ReplySchema.model_validate_json(await res.text())\n#     usage = await res.usage()\n#     return reply, usage\n\n\n# r, u = await process_doc(files[3])\n# print(\" ---\\n\", r.better_filename)\n# print(\" ---\\n\", r.summary_markdown)\n# print(\" ---\\n\", r.short_summary_markdown)\n# print(\" ---\\n\", r.one_line_summary_txt)\n# print(r.relevant)\n\n\n# Set up Jinja environment\njinja_env = Environment(loader=FileSystemLoader(settings.templates_dir))\n\nasync def process_doc_jinja(filename: str) -&gt; tuple[ReplySchema, Usage]:\n    with open(clone_dir / source.doc_dir / filename) as f:\n        doc = f.read()\n\n    # Load and render template\n    template = jinja_env.get_template(\"process_doc.j2\")\n    prompt = template.render(text=doc, filename=filename)\n\n    res = await (await model.prompt(prompt=prompt, schema=ReplySchema))\n    reply = ReplySchema.model_validate_json(await res.text())\n    usage = await res.usage()\n    return reply, usage\n\n\n# Test the Jinja-based version\nr_jinja, u_jinja = await process_doc_jinja(files[3])\nprint(\" ---\\n\", r_jinja.better_filename)\nprint(\" ---\\n\", r_jinja.summary_markdown)\nprint(\" ---\\n\", r_jinja.short_summary_markdown)\nprint(\" ---\\n\", r_jinja.one_line_summary_txt)\nprint(r_jinja.relevant)\n\n ---\n svelte-file-structure.md\n ---\n ## Svelte File Structure\n\n`.svelte` files contain components written as a superset of HTML with three optional sections: `&lt;script&gt;`, `&lt;style&gt;`, and markup.\n\n### `&lt;script&gt;` Block\n- Contains JavaScript or TypeScript (add `lang=\"ts\"` attribute)\n- Runs when a component instance is created\n- Top-level variables are accessible in markup\n- Use runes to declare component props and add reactivity\n\n### `&lt;script module&gt;` Block\n- Runs once when the module first evaluates, not per instance\n- Variables declared here can be referenced elsewhere in the component (one-way)\n- Can `export` bindings from this block; these become module exports\n- Cannot use `export default` (reserved for the component itself)\n- TypeScript support: ensure editor setup recognizes exports (supported by Svelte VS Code extension and IntelliJ plugin)\n\n### `&lt;style&gt;` Block\n- CSS is scoped to the component only\n- Selectors only affect elements within that component\n- Example:\n```svelte\n&lt;style&gt;\n  p { color: burlywood; } /* only affects &lt;p&gt; in this component */\n&lt;/style&gt;\n```\n ---\n ## Svelte File Structure\n\n`.svelte` files have three optional sections:\n\n- **`&lt;script&gt;`** — JavaScript/TypeScript run per instance; access variables in markup\n- **`&lt;script module&gt;`** — JavaScript/TypeScript run once at module load; export bindings\n- **`&lt;style&gt;`** — Scoped CSS affecting only elements in that component\n ---\n Overview of the three optional sections in .svelte component files: script, module script, and scoped styles.\nTrue\n\n\n\nclass DocPage(BaseModel):\n    \"\"\"Represents a single documentation page\"\"\"\n    filename: str\n    original_path: str\n    better_filename: str\n    summary_markdown: str\n    short_summary_markdown: str\n    one_line_summary_txt: str\n    relevant: bool\n    usage: Usage\n\nclass DocDirectory(BaseModel):\n    \"\"\"Represents a directory in the documentation structure\"\"\"\n    name: str\n    path: str\n    better_name: str|None = None\n    pages: list[DocPage] = []\n    subdirs: dict[str, 'DocDirectory'] = {}\n    short_summary: str|None = None\n    one_line_summary: str|None = None\n    usage: Usage|None = None  # Usage for directory summarization only\n\ndef build_doc_tree(root_path: Path) -&gt; DocDirectory:\n    \"\"\"Build a tree structure mirroring the documentation directory\"\"\"\n    def build_tree(path: Path, rel_path: str = \"\") -&gt; DocDirectory:\n        dir_name = path.name if rel_path else \"root\"\n        doc_dir = DocDirectory(name=dir_name, path=rel_path)\n\n        # Get immediate children only\n        for item in sorted(path.iterdir()):\n            if item.is_file() and item.suffix == '.md':\n                # We'll process files later, just record them\n                doc_dir.pages.append(DocPage(\n                    filename=item.name,\n                    original_path=str(Path(rel_path) / item.name) if rel_path else item.name,\n                    better_filename=\"\",\n                    summary_markdown=\"\",\n                    short_summary_markdown=\"\",\n                    one_line_summary_txt=\"\",\n                    relevant=False,\n                    usage=Usage(input=0, output=0)\n                ))\n            elif item.is_dir():\n                subdir_rel = str(Path(rel_path) / item.name) if rel_path else item.name\n                doc_dir.subdirs[item.name] = build_tree(item, subdir_rel)\n\n        return doc_dir\n\n    return build_tree(root_path)\n\ndef calculate_total_usage(doc_dir: DocDirectory) -&gt; Usage:\n    \"\"\"Calculate total usage for a directory tree including all pages, subdirs, and summaries\"\"\"\n    total_input = 0\n    total_output = 0\n\n    # Add usage from all pages in this directory\n    for page in doc_dir.pages:\n        total_input += page.usage.input or 0\n        total_output += page.usage.output or 0\n\n    # Add usage from directory summarization\n    if doc_dir.usage:\n        total_input += doc_dir.usage.input or 0\n        total_output += doc_dir.usage.output or 0\n\n    # Recursively add usage from subdirectories\n    for subdir in doc_dir.subdirs.values():\n        subdir_usage = calculate_total_usage(subdir)\n        total_input += subdir_usage.input or 0\n        total_output += subdir_usage.output or 0\n\n    return Usage(input=total_input, output=total_output)\n\ndoc_tree = build_doc_tree(doc_dir_path)\nprint(doc_tree.model_dump())\n\n{'name': 'root', 'path': '', 'better_name': None, 'pages': [{'filename': 'index.md', 'original_path': 'index.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}], 'subdirs': {'01-introduction': {'name': '01-introduction', 'path': '01-introduction', 'better_name': None, 'pages': [{'filename': '01-overview.md', 'original_path': '01-introduction/01-overview.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '02-getting-started.md', 'original_path': '01-introduction/02-getting-started.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '03-svelte-files.md', 'original_path': '01-introduction/03-svelte-files.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '04-svelte-js-files.md', 'original_path': '01-introduction/04-svelte-js-files.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': 'index.md', 'original_path': '01-introduction/index.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}], 'subdirs': {}, 'short_summary': None, 'one_line_summary': None, 'usage': None}, '02-runes': {'name': '02-runes', 'path': '02-runes', 'better_name': None, 'pages': [{'filename': '01-what-are-runes.md', 'original_path': '02-runes/01-what-are-runes.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '02-$state.md', 'original_path': '02-runes/02-$state.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '03-$derived.md', 'original_path': '02-runes/03-$derived.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '04-$effect.md', 'original_path': '02-runes/04-$effect.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '05-$props.md', 'original_path': '02-runes/05-$props.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '06-$bindable.md', 'original_path': '02-runes/06-$bindable.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '07-$inspect.md', 'original_path': '02-runes/07-$inspect.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '08-$host.md', 'original_path': '02-runes/08-$host.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': 'index.md', 'original_path': '02-runes/index.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}], 'subdirs': {}, 'short_summary': None, 'one_line_summary': None, 'usage': None}, '03-template-syntax': {'name': '03-template-syntax', 'path': '03-template-syntax', 'better_name': None, 'pages': [{'filename': '01-basic-markup.md', 'original_path': '03-template-syntax/01-basic-markup.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '02-if.md', 'original_path': '03-template-syntax/02-if.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '03-each.md', 'original_path': '03-template-syntax/03-each.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '04-key.md', 'original_path': '03-template-syntax/04-key.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '05-await.md', 'original_path': '03-template-syntax/05-await.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '06-snippet.md', 'original_path': '03-template-syntax/06-snippet.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '07-@render.md', 'original_path': '03-template-syntax/07-@render.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '08-@html.md', 'original_path': '03-template-syntax/08-@html.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '09-@attach.md', 'original_path': '03-template-syntax/09-@attach.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '10-@const.md', 'original_path': '03-template-syntax/10-@const.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '11-@debug.md', 'original_path': '03-template-syntax/11-@debug.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '12-bind.md', 'original_path': '03-template-syntax/12-bind.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '13-use.md', 'original_path': '03-template-syntax/13-use.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '14-transition.md', 'original_path': '03-template-syntax/14-transition.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '15-in-and-out.md', 'original_path': '03-template-syntax/15-in-and-out.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '16-animate.md', 'original_path': '03-template-syntax/16-animate.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '17-style.md', 'original_path': '03-template-syntax/17-style.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '18-class.md', 'original_path': '03-template-syntax/18-class.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': 'index.md', 'original_path': '03-template-syntax/index.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}], 'subdirs': {}, 'short_summary': None, 'one_line_summary': None, 'usage': None}, '04-styling': {'name': '04-styling', 'path': '04-styling', 'better_name': None, 'pages': [{'filename': '01-scoped-styles.md', 'original_path': '04-styling/01-scoped-styles.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '02-global-styles.md', 'original_path': '04-styling/02-global-styles.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '03-custom-properties.md', 'original_path': '04-styling/03-custom-properties.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '04-nested-style-elements.md', 'original_path': '04-styling/04-nested-style-elements.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': 'index.md', 'original_path': '04-styling/index.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}], 'subdirs': {}, 'short_summary': None, 'one_line_summary': None, 'usage': None}, '05-special-elements': {'name': '05-special-elements', 'path': '05-special-elements', 'better_name': None, 'pages': [{'filename': '01-svelte-boundary.md', 'original_path': '05-special-elements/01-svelte-boundary.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '02-svelte-window.md', 'original_path': '05-special-elements/02-svelte-window.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '03-svelte-document.md', 'original_path': '05-special-elements/03-svelte-document.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '04-svelte-body.md', 'original_path': '05-special-elements/04-svelte-body.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '05-svelte-head.md', 'original_path': '05-special-elements/05-svelte-head.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '06-svelte-element.md', 'original_path': '05-special-elements/06-svelte-element.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '07-svelte-options.md', 'original_path': '05-special-elements/07-svelte-options.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': 'index.md', 'original_path': '05-special-elements/index.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}], 'subdirs': {}, 'short_summary': None, 'one_line_summary': None, 'usage': None}, '06-runtime': {'name': '06-runtime', 'path': '06-runtime', 'better_name': None, 'pages': [{'filename': '01-stores.md', 'original_path': '06-runtime/01-stores.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '02-context.md', 'original_path': '06-runtime/02-context.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '03-lifecycle-hooks.md', 'original_path': '06-runtime/03-lifecycle-hooks.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '04-imperative-component-api.md', 'original_path': '06-runtime/04-imperative-component-api.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': 'index.md', 'original_path': '06-runtime/index.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}], 'subdirs': {}, 'short_summary': None, 'one_line_summary': None, 'usage': None}, '07-misc': {'name': '07-misc', 'path': '07-misc', 'better_name': None, 'pages': [{'filename': '02-testing.md', 'original_path': '07-misc/02-testing.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '03-typescript.md', 'original_path': '07-misc/03-typescript.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '04-custom-elements.md', 'original_path': '07-misc/04-custom-elements.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '06-v4-migration-guide.md', 'original_path': '07-misc/06-v4-migration-guide.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '07-v5-migration-guide.md', 'original_path': '07-misc/07-v5-migration-guide.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '99-faq.md', 'original_path': '07-misc/99-faq.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': 'index.md', 'original_path': '07-misc/index.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}], 'subdirs': {}, 'short_summary': None, 'one_line_summary': None, 'usage': None}, '98-reference': {'name': '98-reference', 'path': '98-reference', 'better_name': None, 'pages': [{'filename': '20-svelte.md', 'original_path': '98-reference/20-svelte.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '21-svelte-action.md', 'original_path': '98-reference/21-svelte-action.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '21-svelte-animate.md', 'original_path': '98-reference/21-svelte-animate.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '21-svelte-attachments.md', 'original_path': '98-reference/21-svelte-attachments.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '21-svelte-compiler.md', 'original_path': '98-reference/21-svelte-compiler.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '21-svelte-easing.md', 'original_path': '98-reference/21-svelte-easing.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '21-svelte-events.md', 'original_path': '98-reference/21-svelte-events.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '21-svelte-legacy.md', 'original_path': '98-reference/21-svelte-legacy.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '21-svelte-motion.md', 'original_path': '98-reference/21-svelte-motion.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '21-svelte-reactivity-window.md', 'original_path': '98-reference/21-svelte-reactivity-window.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '21-svelte-reactivity.md', 'original_path': '98-reference/21-svelte-reactivity.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '21-svelte-server.md', 'original_path': '98-reference/21-svelte-server.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '21-svelte-store.md', 'original_path': '98-reference/21-svelte-store.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '21-svelte-transition.md', 'original_path': '98-reference/21-svelte-transition.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '30-compiler-errors.md', 'original_path': '98-reference/30-compiler-errors.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '30-compiler-warnings.md', 'original_path': '98-reference/30-compiler-warnings.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '30-runtime-errors.md', 'original_path': '98-reference/30-runtime-errors.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '30-runtime-warnings.md', 'original_path': '98-reference/30-runtime-warnings.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': 'index.md', 'original_path': '98-reference/index.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}], 'subdirs': {'.generated': {'name': '.generated', 'path': '98-reference/.generated', 'better_name': None, 'pages': [{'filename': 'client-errors.md', 'original_path': '98-reference/.generated/client-errors.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': 'client-warnings.md', 'original_path': '98-reference/.generated/client-warnings.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': 'compile-errors.md', 'original_path': '98-reference/.generated/compile-errors.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': 'compile-warnings.md', 'original_path': '98-reference/.generated/compile-warnings.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': 'server-errors.md', 'original_path': '98-reference/.generated/server-errors.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': 'shared-errors.md', 'original_path': '98-reference/.generated/shared-errors.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': 'shared-warnings.md', 'original_path': '98-reference/.generated/shared-warnings.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}], 'subdirs': {}, 'short_summary': None, 'one_line_summary': None, 'usage': None}}, 'short_summary': None, 'one_line_summary': None, 'usage': None}, '99-legacy': {'name': '99-legacy', 'path': '99-legacy', 'better_name': None, 'pages': [{'filename': '00-legacy-overview.md', 'original_path': '99-legacy/00-legacy-overview.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '01-legacy-let.md', 'original_path': '99-legacy/01-legacy-let.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '02-legacy-reactive-assignments.md', 'original_path': '99-legacy/02-legacy-reactive-assignments.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '03-legacy-export-let.md', 'original_path': '99-legacy/03-legacy-export-let.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '04-legacy-$$props-and-$$restProps.md', 'original_path': '99-legacy/04-legacy-$$props-and-$$restProps.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '10-legacy-on.md', 'original_path': '99-legacy/10-legacy-on.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '20-legacy-slots.md', 'original_path': '99-legacy/20-legacy-slots.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '21-legacy-$$slots.md', 'original_path': '99-legacy/21-legacy-$$slots.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '22-legacy-svelte-fragment.md', 'original_path': '99-legacy/22-legacy-svelte-fragment.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '30-legacy-svelte-component.md', 'original_path': '99-legacy/30-legacy-svelte-component.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '31-legacy-svelte-self.md', 'original_path': '99-legacy/31-legacy-svelte-self.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': '40-legacy-component-api.md', 'original_path': '99-legacy/40-legacy-component-api.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}, {'filename': 'index.md', 'original_path': '99-legacy/index.md', 'better_filename': '', 'summary_markdown': '', 'short_summary_markdown': '', 'one_line_summary_txt': '', 'relevant': False, 'usage': {'input': 0, 'output': 0, 'details': None}}], 'subdirs': {}, 'short_summary': None, 'one_line_summary': None, 'usage': None}}, 'short_summary': None, 'one_line_summary': None, 'usage': None}\n\n\n\nclass DirectorySummarySchema(BaseModel):\n    better_name: str\n    short_summary: str\n    one_line_summary: str\n\nasync def summarize_directory(dir_name: str, pages: list[DocPage], subdirs: list[DocDirectory]) -&gt; tuple[DirectorySummarySchema, Usage]:\n    \"\"\"Create a summary for a directory based on its relevant pages and subdirectories\"\"\"\n    template = jinja_env.get_template(\"summarize_directory.j2\")\n    prompt = template.render(dir_name=dir_name, pages=pages, subdirs=subdirs)\n\n    res = await (await model.prompt(prompt=prompt, schema=DirectorySummarySchema))\n    summary = DirectorySummarySchema.model_validate_json(await res.text())\n    usage = await res.usage()\n    return summary, usage\n\n\nasync def process_tree_depth_first(doc_dir: DocDirectory, root_path: Path) -&gt; tuple[int, int]:\n    \"\"\"\n    Process documentation tree depth-first with parallel processing.\n    Returns (total_pages_processed, total_relevant_pages)\n    \"\"\"\n    total_processed = 0\n    total_relevant = 0\n\n    # First, recursively process all subdirectories in parallel\n    if doc_dir.subdirs:\n        subdir_tasks = [\n            process_tree_depth_first(subdir, root_path)\n            for subdir in doc_dir.subdirs.values()\n        ]\n        subdir_results = await asyncio.gather(*subdir_tasks)\n\n        for sub_processed, sub_relevant in subdir_results:\n            total_processed += sub_processed\n            total_relevant += sub_relevant\n\n    # Then process all pages in this directory in parallel\n    if doc_dir.pages:\n        async def process_single_page(page: DocPage, index: int) -&gt; tuple[int, DocPage]:\n            print(f\"Processing: {page.original_path}\")\n            reply, usage = await process_doc_jinja(page.original_path)\n\n            return index, DocPage(\n                filename=page.filename,\n                original_path=page.original_path,\n                better_filename=reply.better_filename,\n                summary_markdown=reply.summary_markdown,\n                short_summary_markdown=reply.short_summary_markdown,\n                one_line_summary_txt=reply.one_line_summary_txt,\n                relevant=reply.relevant,\n                usage=usage\n            )\n\n        page_tasks = [\n            process_single_page(page, i)\n            for i, page in enumerate(doc_dir.pages)\n        ]\n        page_results = await asyncio.gather(*page_tasks)\n\n        # Update pages with results\n        for index, processed_page in page_results:\n            doc_dir.pages[index] = processed_page\n            total_processed += 1\n            if processed_page.relevant:\n                total_relevant += 1\n\n    # After processing all pages and subdirs, create directory summary\n    relevant_pages = [p for p in doc_dir.pages if p.relevant]\n    relevant_subdirs = [s for s in doc_dir.subdirs.values() if s.short_summary is not None]\n\n    if relevant_pages or relevant_subdirs:\n        print(f\"Summarizing directory: {doc_dir.path or 'root'} ({len(relevant_pages)} pages, {len(relevant_subdirs)} subdirs)\")\n        dir_summary, usage = await summarize_directory(doc_dir.name, relevant_pages, relevant_subdirs)\n        doc_dir.better_name = dir_summary.better_name\n        doc_dir.short_summary = dir_summary.short_summary\n        doc_dir.one_line_summary = dir_summary.one_line_summary\n        doc_dir.usage = usage\n\n    return total_processed, total_relevant\n\n\ndoc_tree.subdirs = {\n    \"02-runes\" : doc_tree.subdirs[\"02-runes\"]\n}\ndoc_tree.model_dump()\n\n{'name': 'root',\n 'path': '',\n 'better_name': None,\n 'pages': [{'filename': 'index.md',\n   'original_path': 'index.md',\n   'better_filename': '',\n   'summary_markdown': '',\n   'short_summary_markdown': '',\n   'one_line_summary_txt': '',\n   'relevant': False,\n   'usage': {'input': 0, 'output': 0, 'details': None}}],\n 'subdirs': {'02-runes': {'name': '02-runes',\n   'path': '02-runes',\n   'better_name': None,\n   'pages': [{'filename': '01-what-are-runes.md',\n     'original_path': '02-runes/01-what-are-runes.md',\n     'better_filename': '',\n     'summary_markdown': '',\n     'short_summary_markdown': '',\n     'one_line_summary_txt': '',\n     'relevant': False,\n     'usage': {'input': 0, 'output': 0, 'details': None}},\n    {'filename': '02-$state.md',\n     'original_path': '02-runes/02-$state.md',\n     'better_filename': '',\n     'summary_markdown': '',\n     'short_summary_markdown': '',\n     'one_line_summary_txt': '',\n     'relevant': False,\n     'usage': {'input': 0, 'output': 0, 'details': None}},\n    {'filename': '03-$derived.md',\n     'original_path': '02-runes/03-$derived.md',\n     'better_filename': '',\n     'summary_markdown': '',\n     'short_summary_markdown': '',\n     'one_line_summary_txt': '',\n     'relevant': False,\n     'usage': {'input': 0, 'output': 0, 'details': None}},\n    {'filename': '04-$effect.md',\n     'original_path': '02-runes/04-$effect.md',\n     'better_filename': '',\n     'summary_markdown': '',\n     'short_summary_markdown': '',\n     'one_line_summary_txt': '',\n     'relevant': False,\n     'usage': {'input': 0, 'output': 0, 'details': None}},\n    {'filename': '05-$props.md',\n     'original_path': '02-runes/05-$props.md',\n     'better_filename': '',\n     'summary_markdown': '',\n     'short_summary_markdown': '',\n     'one_line_summary_txt': '',\n     'relevant': False,\n     'usage': {'input': 0, 'output': 0, 'details': None}},\n    {'filename': '06-$bindable.md',\n     'original_path': '02-runes/06-$bindable.md',\n     'better_filename': '',\n     'summary_markdown': '',\n     'short_summary_markdown': '',\n     'one_line_summary_txt': '',\n     'relevant': False,\n     'usage': {'input': 0, 'output': 0, 'details': None}},\n    {'filename': '07-$inspect.md',\n     'original_path': '02-runes/07-$inspect.md',\n     'better_filename': '',\n     'summary_markdown': '',\n     'short_summary_markdown': '',\n     'one_line_summary_txt': '',\n     'relevant': False,\n     'usage': {'input': 0, 'output': 0, 'details': None}},\n    {'filename': '08-$host.md',\n     'original_path': '02-runes/08-$host.md',\n     'better_filename': '',\n     'summary_markdown': '',\n     'short_summary_markdown': '',\n     'one_line_summary_txt': '',\n     'relevant': False,\n     'usage': {'input': 0, 'output': 0, 'details': None}},\n    {'filename': 'index.md',\n     'original_path': '02-runes/index.md',\n     'better_filename': '',\n     'summary_markdown': '',\n     'short_summary_markdown': '',\n     'one_line_summary_txt': '',\n     'relevant': False,\n     'usage': {'input': 0, 'output': 0, 'details': None}}],\n   'subdirs': {},\n   'short_summary': None,\n   'one_line_summary': None,\n   'usage': None}},\n 'short_summary': None,\n 'one_line_summary': None,\n 'usage': None}\n\n\n\n# Process the entire documentation tree\nprocessed, relevant = await process_tree_depth_first(doc_tree, doc_dir_path)\nprint(f\"\\n\\nTotal pages processed: {processed}\")\nprint(f\"Total relevant pages: {relevant}\")\n\nProcessing: 02-runes/01-what-are-runes.md\nProcessing: 02-runes/02-$state.md\nProcessing: 02-runes/03-$derived.md\nProcessing: 02-runes/04-$effect.md\nProcessing: 02-runes/05-$props.md\nProcessing: 02-runes/06-$bindable.md\nProcessing: 02-runes/07-$inspect.md\nProcessing: 02-runes/08-$host.md\nProcessing: 02-runes/index.md\nSummarizing directory: 02-runes (9 pages, 0 subdirs)\nProcessing: index.md\nSummarizing directory: root (0 pages, 1 subdirs)\n\n\nTotal pages processed: 10\nTotal relevant pages: 9\n\n\n\n# Calculate total usage for the entire tree\ntotal_usage = calculate_total_usage(doc_tree)\nprint(f\"\\nTotal Usage:\")\nprint(f\"  Input tokens: {total_usage.input:,}\")\nprint(f\"  Output tokens: {total_usage.output:,}\")\nprint(f\"  Total tokens: {(total_usage.input + total_usage.output):,}\")\n\n\nTotal Usage:\n  Input tokens: 28,530\n  Output tokens: 5,536\n  Total tokens: 34,066\n\n\n\ndoc_tree.model_dump()\n\n{'name': 'root',\n 'path': '',\n 'better_name': 'svelte-reactivity-system',\n 'pages': [{'filename': 'index.md',\n   'original_path': 'index.md',\n   'better_filename': 'index.md',\n   'summary_markdown': 'This file is the documentation index/landing page for Svelte. It appears to be a mostly empty template page with only a title defined in the frontmatter. No substantive content about Svelte features, API, guides, or other documentation material is present in this file.',\n   'short_summary_markdown': 'Empty documentation index page with only a title specified in frontmatter.',\n   'one_line_summary_txt': 'Empty documentation landing page.',\n   'relevant': False,\n   'usage': {'input': 971, 'output': 188, 'details': None}}],\n 'subdirs': {'02-runes': {'name': '02-runes',\n   'path': '02-runes',\n   'better_name': 'svelte-runes-reference',\n   'pages': [{'filename': '01-what-are-runes.md',\n     'original_path': '02-runes/01-what-are-runes.md',\n     'better_filename': 'runes-overview.md',\n     'summary_markdown': \"## Runes Overview\\n\\nRunes are compiler directives with a `$` prefix used in `.svelte`, `.svelte.js`, and `.svelte.ts` files to control Svelte's compiler behavior. They function as language keywords with specific syntax rules.\\n\\n### Key Characteristics\\n\\n- **Syntax**: Prefix with `$` and appear function-like: `let message = $state('hello');`\\n- **Automatic availability**: No imports needed — built into the language\\n- **Non-values**: Cannot be assigned to variables or passed as function arguments\\n- **Position-sensitive**: Only valid in certain contexts; compiler validates placement\\n\\n### Scope\\n\\n- Introduced in Svelte 5\\n- Available in component files (`.svelte`) and JavaScript/TypeScript modules (`.svelte.js`/`.svelte.ts`)\",\n     'short_summary_markdown': \"Runes are compiler keywords prefixed with `$` (e.g., `$state()`) used to control Svelte's behavior. They're built-in, cannot be assigned to variables, and are position-sensitive with compiler validation. Introduced in Svelte 5.\",\n     'one_line_summary_txt': 'Runes are $ -prefixed compiler keywords in Svelte that control the compiler behavior, similar to language syntax rather than regular functions.',\n     'relevant': True,\n     'usage': {'input': 1215, 'output': 389, 'details': None}},\n    {'filename': '02-$state.md',\n     'original_path': '02-runes/02-$state.md',\n     'better_filename': 'state-rune-guide.md',\n     'summary_markdown': \"## Summary\\n\\nThe `$state` rune creates reactive state that automatically updates the UI when changed. Unlike other frameworks, state values are plain JavaScript values (numbers, arrays, objects) that you mutate directly.\\n\\n### Deep Reactivity\\n- Arrays and simple objects are deeply reactive proxies — modifying nested properties (`todos[0].done = true`) triggers granular updates\\n- Proxification is recursive until non-simple types (classes, `Object.create` instances) are encountered\\n- Destructuring reactive values breaks reactivity at that point; references become static\\n\\n### `$state.raw`\\nUse when you don't want deep reactivity or need performance optimization. State must be _reassigned_ rather than mutated:\\n```js\\nlet person = $state.raw({ name: 'John', age: 30 });\\nperson.age = 31; // has no effect\\nperson = { name: 'John', age: 31 }; // works\\n```\\n\\n### Classes\\nClass instances aren't proxied. Instead, declare `$state` on class fields:\\n```js\\nclass Todo {\\n  done = $state(false);\\n  constructor(text) {\\n    this.text = $state(text);\\n  }\\n  reset = () =&gt; { /* uses arrow function to preserve `this` */ }\\n}\\n```\\n\\n### `$state.snapshot`\\nConverts a reactive proxy to a static snapshot for external libraries:\\n```js\\n$state.snapshot(counter) // returns plain object, not Proxy\\n```\\n\\n### Passing State Across Modules\\nState can only be exported if not directly reassigned. Use these patterns:\\n- Export an object containing the state: `export const counter = $state({ count: 0 })`\\n- Export accessor functions: `export function getCount() { return count; }`\\n\\nNever export a directly-reassigned state variable, as the compiler transforms `$state` references per-file and won't apply transforms to imported references.\",\n     'short_summary_markdown': '## Summary\\n\\nThe `$state` rune creates reactive state. Plain values update directly; arrays/objects become deeply reactive proxies that trigger granular updates on nested property changes.\\n\\nKey variants:\\n- **`$state`** — Deep reactivity for arrays and objects\\n- **`$state.raw`** — Non-reactive state, must reassign instead of mutate\\n- **`$state.snapshot`** — Convert proxy to plain object\\n\\nIn classes, apply `$state` to field declarations. When sharing state across modules, either export a container object or use accessor functions—never directly export and reassign a `$state` variable.',\n     'one_line_summary_txt': 'The $state rune creates reactive state that updates the UI automatically, with deep reactivity for objects/arrays and variants for raw state and snapshots.',\n     'relevant': True,\n     'usage': {'input': 3563, 'output': 720, 'details': None}},\n    {'filename': '03-$derived.md',\n     'original_path': '02-runes/03-$derived.md',\n     'better_filename': 'derived_rune.md',\n     'summary_markdown': '## $derived Rune\\n\\nDerived state is created with the `$derived` rune for automatic calculations based on state changes:\\n\\n```svelte\\nlet count = $state(0);\\nlet doubled = $derived(count * 2);\\n```\\n\\n**Key features:**\\n- Expressions must be side-effect free (no state mutations like `count++`)\\n- Automatically recalculates when dependencies change\\n- Can mark class fields as `$derived`\\n\\n**$derived.by for complex logic:**\\n```svelte\\nlet total = $derived.by(() =&gt; {\\n\\tlet sum = 0;\\n\\tfor (const n of numbers) sum += n;\\n\\treturn sum;\\n});\\n```\\n\\n**Dependency tracking:** Anything read synchronously inside the expression is a dependency. Use `untrack` to exempt values.\\n\\n**Overriding values:** Can reassign derived values (if not declared with `const`) for optimistic UI patterns:\\n```svelte\\nlet likes = $derived(post.likes);\\nasync function onclick() {\\n\\tlikes += 1; // immediate feedback\\n\\ttry { await like(); }\\n\\tcatch { likes -= 1; } // rollback on failure\\n}\\n```\\n\\n**Reactivity notes:**\\n- `$derived` values are not deeply reactive proxies (unlike `$state`)\\n- Mutating properties of a derived value affects the underlying source\\n- Uses push-pull reactivity: state changes notify dependents immediately, but derived values only re-evaluate when read\\n- Downstream updates skip if new derived value is referentially identical to previous value',\n     'short_summary_markdown': 'The `$derived` rune creates reactive derived state that automatically recalculates when dependencies change. Use `$derived(expression)` for simple cases or `$derived.by(() =&gt; {...})` for complex logic. Derived values can be temporarily overridden for optimistic UI and use push-pull reactivity for efficient updates.',\n     'one_line_summary_txt': '$derived rune creates automatic calculated state that recalculates when dependencies change, with support for complex logic and optimistic UI patterns.',\n     'relevant': True,\n     'usage': {'input': 2703, 'output': 564, 'details': None}},\n    {'filename': '04-$effect.md',\n     'original_path': '02-runes/04-$effect.md',\n     'better_filename': '$effect-rune-guide.md',\n     'summary_markdown': \"## $effect Rune Documentation\\n\\n### Core Concept\\n`$effect` is a rune that runs functions when reactive state updates. Effects execute in the browser (not during SSR) and are used for side effects like third-party library calls, canvas manipulation, and network requests. State updates should generally be avoided within effects to prevent infinite loops.\\n\\n### Key Mechanics\\n- Effects automatically track synchronously-read reactive values (`$state`, `$derived`, `$props`) and re-run when dependencies change\\n- Run after component mounting and in microtasks after state changes\\n- Multiple state changes in the same moment batch into a single re-run\\n- Effects can return a teardown function that runs before re-runs and on component destruction\\n- Only reruns when objects change, not when properties inside them change (unless the property itself is directly accessed)\\n\\n### Dependency Tracking\\n- Automatic tracking of synchronously-read reactive values\\n- Asynchronously-read values (after `await` or `setTimeout`) are NOT tracked\\n- Conditional code affects dependencies: only values read in the executed path are tracked\\n- When re-running, only previously-read dependencies trigger reruns\\n\\n### Variants\\n- **`$effect.pre`**: Runs code before DOM updates (use `tick()` for post-DOM operations)\\n- **`$effect.tracking()`**: Advanced - returns boolean indicating if code runs in a tracking context\\n- **`$effect.root`**: Advanced - creates non-tracked scope with manual cleanup for effects outside component initialization\\n\\n### Lifecycle\\nEffects run after DOM mounting in microtasks after state changes. Teardown functions execute:\\n1. Immediately before effect re-runs\\n2. When component/parent effect is destroyed\\n\\n### Anti-patterns to Avoid\\n- **Don't update state**: Use `$derived` for computed values instead of effects that write state\\n- **Don't link values**: Use `$derived` or function bindings rather than multiple effects updating each other\\n- **Don't create infinite loops**: If you must read and write the same state in an effect, use `untrack()`\\n\\n### Use Cases\\n- Canvas drawing and direct DOM manipulation\\n- Analytics and third-party integrations\\n- Network requests and timers\\n- Autoscroll behavior and similar DOM-based interactions\",\n     'short_summary_markdown': '## $effect Rune\\n\\n`$effect` runs side-effect functions when reactive state changes. It automatically tracks synchronously-read reactive values and reruns when they change. Effects can return teardown functions for cleanup. Variants include `$effect.pre` (runs before DOM updates) and advanced features like `$effect.tracking()` and `$effect.root`. Avoid using effects for state synchronization—use `$derived` instead.',\n     'one_line_summary_txt': '$effect rune for running side effects when reactive state changes, with automatic dependency tracking and lifecycle management.',\n     'relevant': True,\n     'usage': {'input': 6930, 'output': 733, 'details': None}},\n    {'filename': '05-$props.md',\n     'original_path': '02-runes/05-$props.md',\n     'better_filename': 'component-props-rune.md',\n     'summary_markdown': '## Component Props with the `$props` Rune\\n\\nThe `$props` rune receives component inputs (props) passed from parent components. Props are passed like element attributes and received using destructuring assignment.\\n\\n### Basic Usage\\n```svelte\\n// Parent: &lt;MyComponent adjective=\"cool\" /&gt;\\n// Child:\\nlet { adjective } = $props();\\n```\\n\\n### Key Features\\n\\n**Fallback Values** — Provide defaults when props aren\\'t set:\\n```js\\nlet { adjective = \\'happy\\' } = $props();\\n```\\n\\n**Renaming Props** — Use destructuring to rename invalid identifiers or keywords:\\n```js\\nlet { super: trouper = \\'lights are gonna find me\\' } = $props();\\n```\\n\\n**Rest Props** — Capture remaining props:\\n```js\\nlet { a, b, c, ...others } = $props();\\n```\\n\\n### Prop Updates and Mutations\\n- Child components can temporarily reassign props, which updates when the parent\\'s prop changes\\n- **Do not mutate regular object props** — mutations have no effect\\n- **Do not mutate reactive state props** — causes an `ownership_invalid_mutation` warning; use callbacks or `$bindable` instead\\n- Fallback values are not turned into reactive proxies, so mutations on them have no effect\\n\\n### Type Safety\\nAdd type annotations for better IDE support and documentation:\\n```svelte\\n&lt;script lang=\"ts\"&gt;\\n\\tlet { adjective }: { adjective: string } = $props();\\n&lt;/script&gt;\\n```\\n\\nOr use JSDoc in JavaScript:\\n```svelte\\n/** @type {{ adjective: string }} */\\nlet { adjective } = $props();\\n```\\n\\n### `$props.id()`\\nGenerates a unique, hydration-stable ID for the current component instance. Useful for linking elements with `for`, `aria-labelledby`, etc.:\\n```svelte\\nconst uid = $props.id();\\n// &lt;label for=\"{uid}-firstname\"&gt;...&lt;/label&gt;\\n// &lt;input id=\"{uid}-firstname\" /&gt;\\n```',\n     'short_summary_markdown': \"## Component Props with the `$props` Rune\\n\\nReceive component inputs using the `$props()` rune with destructuring. Supports fallback values, prop renaming, and rest parameters.\\n\\n**Key rules:**\\n- Child components can reassign but shouldn't mutate regular object props\\n- Mutating reactive state props causes warnings — use callbacks or `$bindable` instead\\n- Add TypeScript or JSDoc type annotations for type safety\\n- Use `$props.id()` for generating unique, hydration-stable IDs\",\n     'one_line_summary_txt': 'The `$props` rune receives and destructures component inputs with support for defaults, renaming, and type safety.',\n     'relevant': True,\n     'usage': {'input': 3893, 'output': 725, 'details': None}},\n    {'filename': '06-$bindable.md',\n     'original_path': '02-runes/06-$bindable.md',\n     'better_filename': 'bindable-props-bidirectional-data-flow.md',\n     'summary_markdown': \"## $bindable Rune for Two-Way Data Binding\\n\\n### Overview\\nThe `$bindable` rune enables component props to flow bidirectionally—from parent to child and back up. This allows child components to update parent state while maintaining controlled data flow.\\n\\n### Key Concepts\\n- **Default behavior**: Props flow one-way (parent → child)\\n- **With $bindable**: Data can flow both directions, simplifying code when used carefully\\n- **State mutation**: Bindable props allow state proxies to be mutated in child components\\n- **Warning**: Mutation of non-owned state triggers Svelte warnings; use sparingly\\n\\n### Usage\\nMark a prop as bindable using the `$bindable()` rune in the prop declaration:\\n\\n```svelte\\n// In child component\\nlet { value = $bindable(), ...props } = $props();\\n&lt;input bind:value={value} {...props} /&gt;\\n```\\n\\nParent components can then use the `bind:` directive to establish two-way binding:\\n\\n```svelte\\n// In parent component\\nlet message = $state('hello');\\n&lt;FancyInput bind:value={message} /&gt;\\n```\\n\\n### Optional Behavior\\n- Parent components **don't have to use `bind:`** — they can pass normal props instead\\n- Specify fallback values for when no prop is passed: `value = $bindable('fallback')`\",\n     'short_summary_markdown': '## $bindable: Two-Way Prop Binding\\n\\nThe `$bindable` rune enables bidirectional data flow between parent and child components, allowing children to update parent state via the `bind:` directive.\\n\\n### Quick Example\\n```svelte\\n// Child: declare bindable prop\\nlet { value = $bindable() } = $props();\\n\\n// Parent: use bind: directive\\n&lt;FancyInput bind:value={message} /&gt;\\n```\\n\\nUse sparingly—mutation of child-modified props is intentional but should be carefully considered.',\n     'one_line_summary_txt': 'The $bindable rune enables two-way data binding on component props, allowing child components to update parent state when used with the bind: directive.',\n     'relevant': True,\n     'usage': {'input': 1780, 'output': 582, 'details': None}},\n    {'filename': '07-$inspect.md',\n     'original_path': '02-runes/07-$inspect.md',\n     'better_filename': '$inspect-rune-debugging',\n     'summary_markdown': '## $inspect Rune\\n\\nThe `$inspect` rune is a development-only debugging tool that logs values whenever their reactive state changes (similar to `console.log`). It tracks reactive state deeply, including changes within objects and arrays.\\n\\n**Basic Usage:**\\n```svelte\\nlet count = $state(0);\\n$inspect(count); // logs whenever count changes\\n```\\n\\n**Custom Handler with `.with()`:**\\n`$inspect` returns a `with` property that accepts a callback with signature `(type, ...values)` where `type` is either `\"init\"` or `\"update\"`:\\n```svelte\\nlet count = $state(0);\\n$inspect(count).with((type, count) =&gt; {\\n  if (type === \\'update\\') {\\n    debugger; // or console.trace()\\n  }\\n});\\n```\\n\\nYou can use `$inspect(stuff).with(console.trace)` to track where changes originate.\\n\\n**$inspect.trace() (v5.14+):**\\nTraces which reactive state caused a function to re-run within effects or derived values. Must be the first statement in a function body:\\n```svelte\\n$effect(() =&gt; {\\n  $inspect.trace(); // optional label: $inspect.trace(\\'label\\')\\n  doSomeWork();\\n});\\n```\\n\\nNote: `$inspect` is a no-op in production builds.',\n     'short_summary_markdown': '## $inspect Rune\\n\\nDevelopment-only debugging rune that logs reactive values whenever they change, similar to `console.log` but with deep reactivity tracking.\\n\\n**Main features:**\\n- Basic logging: `$inspect(count)` logs on state changes\\n- Custom handlers: `$inspect(count).with((type, value) =&gt; {})` where type is `\"init\"` or `\"update\"`\\n- Tracing: `$inspect.trace()` (v5.14+) identifies which reactive state triggered an effect/derived re-run (must be first statement in function)\\n\\nNo-op in production.',\n     'one_line_summary_txt': 'Development debugging rune that logs reactive state changes and can trace what causes effects/derived values to re-run.',\n     'relevant': True,\n     'usage': {'input': 2084, 'output': 588, 'details': None}},\n    {'filename': '08-$host.md',\n     'original_path': '02-runes/08-$host.md',\n     'better_filename': 'host-element-access.md',\n     'summary_markdown': '## $host Rune for Custom Elements\\n\\nThe `$host` rune provides access to the host element when compiling a component as a custom element. This allows you to interact with the host element directly, such as dispatching custom events.\\n\\n### Use Case: Dispatching Custom Events\\n\\nWhen building custom elements, use `$host()` to dispatch events that parent components can listen to:\\n\\n```svelte\\n&lt;svelte:options customElement=\"my-stepper\" /&gt;\\n\\n&lt;script&gt;\\n\\tfunction dispatch(type) {\\n\\t\\t$host().dispatchEvent(new CustomEvent(type));\\n\\t}\\n&lt;/script&gt;\\n\\n&lt;button onclick={() =&gt; dispatch(\\'decrement\\')}&gt;decrement&lt;/button&gt;\\n&lt;button onclick={() =&gt; dispatch(\\'increment\\')}&gt;increment&lt;/button&gt;\\n```\\n\\nParent components can then handle these events:\\n\\n```svelte\\n&lt;my-stepper\\n\\tondecrement={() =&gt; count -= 1}\\n\\tonincrement={() =&gt; count += 1}\\n&gt;&lt;/my-stepper&gt;\\n```',\n     'short_summary_markdown': '## $host Rune\\n\\nThe `$host` rune provides access to the host element in custom elements, enabling you to dispatch custom events that parent components can listen to.\\n\\nExample:\\n```svelte\\n&lt;svelte:options customElement=\"my-component\" /&gt;\\n$host().dispatchEvent(new CustomEvent(\\'my-event\\'));\\n```',\n     'one_line_summary_txt': 'The $host rune allows custom element components to access their host element and dispatch events to parent consumers.',\n     'relevant': True,\n     'usage': {'input': 1603, 'output': 436, 'details': None}},\n    {'filename': 'index.md',\n     'original_path': '02-runes/index.md',\n     'better_filename': 'runes.md',\n     'summary_markdown': '## Runes\\n\\nThis page appears to be an index or landing page for documentation about runes in the library.\\n\\n**Note:** The provided content only includes the front matter (title metadata) without the actual documentation body. The page is titled \"Runes\" but the detailed content explaining what runes are, how to use them, and relevant examples is not included in this excerpt.\\n\\nTo provide a comprehensive summary, the actual page content would be needed.',\n     'short_summary_markdown': 'Index page for runes documentation. Content not provided in excerpt.',\n     'one_line_summary_txt': 'Documentation index page for runes.',\n     'relevant': True,\n     'usage': {'input': 977, 'output': 227, 'details': None}}],\n   'subdirs': {},\n   'short_summary': \"Runes are compiler keywords (prefixed with `$`) that control Svelte 5's reactivity system. They enable reactive state management with `$state`, computed values with `$derived`, side-effects with `$effect`, bidirectional prop binding with `$bindable`, and component communication patterns. Each rune serves a specific purpose in building reactive applications, from creating deeply-reactive proxies to handling component inputs and custom element integration.\",\n   'one_line_summary': 'Runes are built-in compiler keywords that provide reactive state, derived values, side-effects, props, and debugging utilities for Svelte 5 applications.',\n   'usage': {'input': 1816, 'output': 206, 'details': None}}},\n 'short_summary': \"Runes are Svelte 5's compiler keywords that form the foundation of its reactivity system. They provide reactive state management ($state), computed values ($derived), side-effects ($effect), and component communication patterns ($bindable). These compiler directives enable developers to build deeply-reactive applications with automatic dependency tracking and efficient updates.\",\n 'one_line_summary': 'Svelte 5 runes are $ -prefixed compiler keywords that control reactivity, state management, derived values, effects, and component binding.',\n 'usage': {'input': 995, 'output': 178, 'details': None}}\n\n\n\ndef save_doc_tree(doc_dir: DocDirectory, doc_source_root: PathLib, output_root: PathLib, source_name: str):\n    \"\"\"\n    Save the processed documentation tree to disk.\n\n    Structure:\n    - output_root/source_name/index.json - high-level metadata\n    - output_root/source_name/&lt;dir_name&gt;/metadata.json - directory metadata\n    - output_root/source_name/&lt;dir_name&gt;/&lt;page_name&gt;/metadata.json - page metadata\n    - output_root/source_name/&lt;dir_name&gt;/&lt;page_name&gt;/summary.md\n    - output_root/source_name/&lt;dir_name&gt;/&lt;page_name&gt;/summary_short.md\n    - output_root/source_name/&lt;dir_name&gt;/&lt;page_name&gt;/original.md\n    - output_root/source_name/&lt;dir_name&gt;/summary.md (for directories)\n    - output_root/source_name/&lt;dir_name&gt;/summary_short.md (for directories)\n    \"\"\"\n\n    def save_directory(doc_dir: DocDirectory, current_path: PathLib):\n        \"\"\"Recursively save directory structure\"\"\"\n\n        # Save relevant pages in this directory\n        for page in doc_dir.pages:\n            if not page.relevant:\n                continue\n\n            # Use better_filename without extension as directory name, replace spaces with underscores\n            page_name = page.better_filename.rsplit('.', 1)[0] if '.' in page.better_filename else page.better_filename\n            page_name = page_name.replace(' ', '_')\n            page_dir = current_path / page_name\n            page_dir.mkdir(parents=True, exist_ok=True)\n\n            # Write summary files\n            (page_dir / \"summary.md\").write_text(page.summary_markdown)\n            (page_dir / \"summary_short.md\").write_text(page.short_summary_markdown)\n\n            # Copy original file\n            original_file = doc_source_root / page.original_path\n            if original_file.exists():\n                shutil.copy2(original_file, page_dir / \"original.md\")\n\n            # Save page metadata (only one-line summary)\n            page_metadata = {\n                \"filename\": page.filename,\n                \"original_path\": page.original_path,\n                \"better_filename\": page.better_filename,\n                \"one_line_summary\": page.one_line_summary_txt,\n                \"usage\": {\n                    \"input\": page.usage.input,\n                    \"output\": page.usage.output,\n                }\n            }\n            (page_dir / \"metadata.json\").write_text(json.dumps(page_metadata, indent=2))\n\n        # Save directory summaries and metadata if this directory has relevant content\n        if doc_dir.short_summary:\n            (current_path / \"summary.md\").write_text(doc_dir.short_summary)\n            (current_path / \"summary_short.md\").write_text(doc_dir.one_line_summary or \"\")\n\n            # Save directory metadata (only one-line summary and relevant pages)\n            relevant_pages = [page for page in doc_dir.pages if page.relevant]\n            relevant_subdirs = [subdir for subdir in doc_dir.subdirs.values() if subdir.short_summary is not None]\n\n            dir_metadata = {\n                \"name\": doc_dir.name,\n                \"path\": doc_dir.path,\n                \"better_name\": doc_dir.better_name,\n                \"one_line_summary\": doc_dir.one_line_summary,\n                \"usage\": {\n                    \"input\": doc_dir.usage.input if doc_dir.usage else 0,\n                    \"output\": doc_dir.usage.output if doc_dir.usage else 0,\n                } if doc_dir.usage else None,\n                \"pages\": [\n                    {\n                        \"filename\": page.filename,\n                        \"better_filename\": page.better_filename,\n                    }\n                    for page in relevant_pages\n                ],\n                \"subdirs\": [\n                    {\n                        \"name\": subdir.name,\n                        \"better_name\": subdir.better_name,\n                    }\n                    for subdir in relevant_subdirs\n                ]\n            }\n            (current_path / \"metadata.json\").write_text(json.dumps(dir_metadata, indent=2))\n\n        # Recursively save subdirectories\n        for subdir in doc_dir.subdirs.values():\n            if not subdir.short_summary:  # Skip directories with no relevant content\n                continue\n\n            # Use better_name for subdirectory, replace spaces with underscores\n            subdir_name = (subdir.better_name or subdir.name).replace(' ', '_')\n            subdir_path = current_path / subdir_name\n            subdir_path.mkdir(parents=True, exist_ok=True)\n            save_directory(subdir, subdir_path)\n\n    # Create output directory (clear it first if it exists)\n    output_dir = output_root / source_name\n    if output_dir.exists():\n        shutil.rmtree(output_dir)\n    output_dir.mkdir(parents=True, exist_ok=True)\n\n    # Save the directory structure\n    root_name = (doc_dir.better_name or \"root\").replace(' ', '_')\n    root_path = output_dir if root_name == \"root\" else output_dir / root_name\n    root_path.mkdir(parents=True, exist_ok=True)\n    save_directory(doc_dir, root_path)\n\n    # Create index.json with high-level metadata only\n    total_usage = calculate_total_usage(doc_dir)\n\n    index_data = {\n        \"source_name\": source_name,\n        \"root_directory\": {\n            \"name\": doc_dir.name,\n            \"better_name\": doc_dir.better_name,\n            \"path\": doc_dir.path,\n            \"one_line_summary\": doc_dir.one_line_summary,\n        },\n        \"usage\": {\n            \"input_tokens\": total_usage.input,\n            \"output_tokens\": total_usage.output,\n            \"total_tokens\": total_usage.input + total_usage.output,\n        },\n        \"statistics\": {\n            \"total_pages\": sum(1 for _ in iter_pages(doc_dir)),\n            \"relevant_pages\": sum(1 for p in iter_pages(doc_dir) if p.relevant),\n            \"total_directories\": sum(1 for _ in iter_directories(doc_dir)),\n            \"relevant_directories\": sum(1 for d in iter_directories(doc_dir) if d.short_summary),\n        }\n    }\n\n    (output_dir / \"index.json\").write_text(json.dumps(index_data, indent=2))\n\n    print(f\"Saved documentation to: {output_dir}\")\n    print(f\"  Total pages: {index_data['statistics']['total_pages']}\")\n    print(f\"  Relevant pages: {index_data['statistics']['relevant_pages']}\")\n    print(f\"  Total directories: {index_data['statistics']['total_directories']}\")\n    print(f\"  Relevant directories: {index_data['statistics']['relevant_directories']}\")\n\ndef iter_pages(doc_dir: DocDirectory):\n    \"\"\"Iterator over all pages in the tree\"\"\"\n    yield from doc_dir.pages\n    for subdir in doc_dir.subdirs.values():\n        yield from iter_pages(subdir)\n\ndef iter_directories(doc_dir: DocDirectory):\n    \"\"\"Iterator over all directories in the tree\"\"\"\n    for subdir in doc_dir.subdirs.values():\n        yield subdir\n        yield from iter_directories(subdir)\n\n\n# Save the processed documentation tree\nsave_doc_tree(doc_tree, doc_dir_path, settings.output_dir, source.name)\n\nSaved documentation to: ../processed_documents/sveltejs-svelte\n  Total pages: 10\n  Relevant pages: 9\n  Total directories: 1\n  Relevant directories: 1\n\n\n\n# View a sample of the index.json structure\nindex_path = settings.output_dir / source.name / \"index.json\"\nif index_path.exists():\n    with open(index_path) as f:\n        index_data = json.load(f)\n\n    # Show a preview of the structure\n    print(\"Index.json structure preview:\")\n    print(f\"Source: {index_data['source_name']}\")\n    print(f\"\\nRoot directory: {index_data['root_directory'].get('better_name')}\")\n    print(f\"One-line summary: {index_data['root_directory'].get('one_line_summary')}\")\n    print(f\"\\nStatistics:\")\n    for key, value in index_data.get('statistics', {}).items():\n        print(f\"  {key}: {value}\")\n    print(f\"\\nUsage:\")\n    for key, value in index_data.get('usage', {}).items():\n        print(f\"  {key}: {value:,}\")\n\n    # Show first page metadata if available\n    subdirs = index_data.get('root_directory', {}).get('subdirs', {})\n    if subdirs:\n        first_subdir = list(subdirs.values())[0]\n        pages = first_subdir.get('pages', [])\n        if pages:\n            first_page = pages[0]\n            print(f\"\\nSample page metadata:\")\n            print(f\"  Original: {first_page.get('filename')} -&gt; {first_page.get('better_filename')}\")\n            print(f\"  Summary: {first_page.get('one_line_summary')}\")\n            print(f\"  Relevant: {first_page.get('relevant')}\")\n            print(f\"  Usage: {first_page.get('usage')}\")\n\nIndex.json structure preview:\nSource: sveltejs-svelte\n\nRoot directory: svelte-reactivity-system\nOne-line summary: Svelte 5 runes are $ -prefixed compiler keywords that control reactivity, state management, derived values, effects, and component binding.\n\nStatistics:\n  total_pages: 10\n  relevant_pages: 9\n  total_directories: 1\n  relevant_directories: 1\n\nUsage:\n  input_tokens: 28,530\n  output_tokens: 5,536\n  total_tokens: 34,066\n\n\n\n# # View a sample directory summary\n# def print_tree_summaries(doc_dir: DocDirectory, indent=0):\n#     prefix = \"  \" * indent\n#     display_name = doc_dir.better_name or doc_dir.name\n#     print(f\"{prefix}📁 {display_name} ({doc_dir.path or 'root'})\")\n\n#     if doc_dir.one_line_summary:\n#         print(f\"{prefix}   → {doc_dir.one_line_summary}\")\n\n#     # Print relevant pages\n#     relevant_pages = [p for p in doc_dir.pages if p.relevant]\n#     if relevant_pages:\n#         print(f\"{prefix}   Pages: {len(relevant_pages)} relevant / {len(doc_dir.pages)} total\")\n\n#     # Recursively print subdirectories\n#     for subdir in doc_dir.subdirs.values():\n#         print_tree_summaries(subdir, indent + 1)\n\n# print_tree_summaries(doc_tree)",
    "crumbs": [
      "sveltejs/svelte"
    ]
  },
  {
    "objectID": "utils.html",
    "href": "utils.html",
    "title": "Utils",
    "section": "",
    "text": "---------------------------------------------------------------------------\nKeyError                                  Traceback (most recent call last)\nCell In[7], line 1\n----&gt; 1 os.environ[\"ANTHROPIC_API_KEY\"]\n\nFile &lt;frozen os&gt;:717, in __getitem__(self, key)\n\nKeyError: 'ANTHROPIC_API_KEY'\n\n\n\n\nsource\n\nSettings\n\n Settings (_case_sensitive:bool|None=None,\n           _nested_model_default_partial_update:bool|None=None,\n           _env_prefix:str|None=None, _env_file:DotenvType|None=Path('.'),\n           _env_file_encoding:str|None=None,\n           _env_ignore_empty:bool|None=None,\n           _env_nested_delimiter:str|None=None,\n           _env_nested_max_split:int|None=None,\n           _env_parse_none_str:str|None=None,\n           _env_parse_enums:bool|None=None, _cli_prog_name:str|None=None,\n           _cli_parse_args:bool|list[str]|tuple[str,...]|None=None,\n           _cli_settings_source:CliSettingsSource[Any]|None=None,\n           _cli_parse_none_str:str|None=None,\n           _cli_hide_none_type:bool|None=None,\n           _cli_avoid_json:bool|None=None,\n           _cli_enforce_required:bool|None=None,\n           _cli_use_class_docs_for_groups:bool|None=None,\n           _cli_exit_on_error:bool|None=None, _cli_prefix:str|None=None,\n           _cli_flag_prefix_char:str|None=None,\n           _cli_implicit_flags:bool|None=None,\n           _cli_ignore_unknown_args:bool|None=None,\n           _cli_kebab_case:bool|None=None,\n           _cli_shortcuts:Mapping[str,str|list[str]]|None=None,\n           _secrets_dir:PathType|None=None, model:str='claude-haiku-4.5',\n           git_dir:pathlib.Path=Path('../git_dir'),\n           output_dir:pathlib.Path=Path('../processed_documents'),\n           templates_dir:pathlib.Path=Path('../templates'),\n           project_root:pathlib.Path=Path('/home/runner/work/lovely-\n           docs/lovely-docs'),\n           sources:dict[str,__main__.Source]={'sveltejs/svelte':\n           GitSource(name='sveltejs-svelte',\n           doc_dir=Path('documentation/docs'),\n           repo='https://github.com/sveltejs/svelte', commit='main')},\n           api_key:str='')\n\n*Base class for settings, allowing values to be overridden by environment variables.\nThis is useful in production for secrets you do not wish to save in code, it plays nicely with docker(-compose), Heroku and any 12 factor app design.\nAll the below attributes can be set via model_config.\nArgs: _case_sensitive: Whether environment and CLI variable names should be read with case-sensitivity. Defaults to None. _nested_model_default_partial_update: Whether to allow partial updates on nested model default object fields. Defaults to False. _env_prefix: Prefix for all environment variables. Defaults to None. _env_file: The env file(s) to load settings values from. Defaults to Path(''), which means that the value from model_config['env_file'] should be used. You can also pass None to indicate that environment variables should not be loaded from an env file. _env_file_encoding: The env file encoding, e.g. 'latin-1'. Defaults to None. _env_ignore_empty: Ignore environment variables where the value is an empty string. Default to False. _env_nested_delimiter: The nested env values delimiter. Defaults to None. _env_nested_max_split: The nested env values maximum nesting. Defaults to None, which means no limit. _env_parse_none_str: The env string value that should be parsed (e.g. “null”, “void”, “None”, etc.) into None type(None). Defaults to None type(None), which means no parsing should occur. _env_parse_enums: Parse enum field names to values. Defaults to None., which means no parsing should occur. _cli_prog_name: The CLI program name to display in help text. Defaults to None if _cli_parse_args is None. Otherwise, defaults to sys.argv[0]. _cli_parse_args: The list of CLI arguments to parse. Defaults to None. If set to True, defaults to sys.argv[1:]. _cli_settings_source: Override the default CLI settings source with a user defined instance. Defaults to None. _cli_parse_none_str: The CLI string value that should be parsed (e.g. “null”, “void”, “None”, etc.) into None type(None). Defaults to _env_parse_none_str value if set. Otherwise, defaults to “null” if _cli_avoid_json is False, and “None” if _cli_avoid_json is True. _cli_hide_none_type: Hide None values in CLI help text. Defaults to False. _cli_avoid_json: Avoid complex JSON objects in CLI help text. Defaults to False. _cli_enforce_required: Enforce required fields at the CLI. Defaults to False. _cli_use_class_docs_for_groups: Use class docstrings in CLI group help text instead of field descriptions. Defaults to False. _cli_exit_on_error: Determines whether or not the internal parser exits with error info when an error occurs. Defaults to True. _cli_prefix: The root parser command line arguments prefix. Defaults to ““. _cli_flag_prefix_char: The flag prefix character to use for CLI optional arguments. Defaults to ‘-’. _cli_implicit_flags: Whether bool fields should be implicitly converted into CLI boolean flags. (e.g. –flag, –no-flag). Defaults to False. _cli_ignore_unknown_args: Whether to ignore unknown CLI args and parse only known ones. Defaults to False. _cli_kebab_case: CLI args use kebab case. Defaults to False. _cli_shortcuts: Mapping of target field name to alias names. Defaults to None. _secrets_dir: The secret files directory or a sequence of directories. Defaults to None.*\n\nsource\n\n\nWebSource\n\n WebSource (_case_sensitive:bool|None=None,\n            _nested_model_default_partial_update:bool|None=None,\n            _env_prefix:str|None=None,\n            _env_file:DotenvType|None=Path('.'),\n            _env_file_encoding:str|None=None,\n            _env_ignore_empty:bool|None=None,\n            _env_nested_delimiter:str|None=None,\n            _env_nested_max_split:int|None=None,\n            _env_parse_none_str:str|None=None,\n            _env_parse_enums:bool|None=None, _cli_prog_name:str|None=None,\n            _cli_parse_args:bool|list[str]|tuple[str,...]|None=None,\n            _cli_settings_source:CliSettingsSource[Any]|None=None,\n            _cli_parse_none_str:str|None=None,\n            _cli_hide_none_type:bool|None=None,\n            _cli_avoid_json:bool|None=None,\n            _cli_enforce_required:bool|None=None,\n            _cli_use_class_docs_for_groups:bool|None=None,\n            _cli_exit_on_error:bool|None=None, _cli_prefix:str|None=None,\n            _cli_flag_prefix_char:str|None=None,\n            _cli_implicit_flags:bool|None=None,\n            _cli_ignore_unknown_args:bool|None=None,\n            _cli_kebab_case:bool|None=None,\n            _cli_shortcuts:Mapping[str,str|list[str]]|None=None,\n            _secrets_dir:PathType|None=None, name:str,\n            doc_dir:pathlib.Path)\n\n*Base class for settings, allowing values to be overridden by environment variables.\nThis is useful in production for secrets you do not wish to save in code, it plays nicely with docker(-compose), Heroku and any 12 factor app design.\nAll the below attributes can be set via model_config.\nArgs: _case_sensitive: Whether environment and CLI variable names should be read with case-sensitivity. Defaults to None. _nested_model_default_partial_update: Whether to allow partial updates on nested model default object fields. Defaults to False. _env_prefix: Prefix for all environment variables. Defaults to None. _env_file: The env file(s) to load settings values from. Defaults to Path(''), which means that the value from model_config['env_file'] should be used. You can also pass None to indicate that environment variables should not be loaded from an env file. _env_file_encoding: The env file encoding, e.g. 'latin-1'. Defaults to None. _env_ignore_empty: Ignore environment variables where the value is an empty string. Default to False. _env_nested_delimiter: The nested env values delimiter. Defaults to None. _env_nested_max_split: The nested env values maximum nesting. Defaults to None, which means no limit. _env_parse_none_str: The env string value that should be parsed (e.g. “null”, “void”, “None”, etc.) into None type(None). Defaults to None type(None), which means no parsing should occur. _env_parse_enums: Parse enum field names to values. Defaults to None., which means no parsing should occur. _cli_prog_name: The CLI program name to display in help text. Defaults to None if _cli_parse_args is None. Otherwise, defaults to sys.argv[0]. _cli_parse_args: The list of CLI arguments to parse. Defaults to None. If set to True, defaults to sys.argv[1:]. _cli_settings_source: Override the default CLI settings source with a user defined instance. Defaults to None. _cli_parse_none_str: The CLI string value that should be parsed (e.g. “null”, “void”, “None”, etc.) into None type(None). Defaults to _env_parse_none_str value if set. Otherwise, defaults to “null” if _cli_avoid_json is False, and “None” if _cli_avoid_json is True. _cli_hide_none_type: Hide None values in CLI help text. Defaults to False. _cli_avoid_json: Avoid complex JSON objects in CLI help text. Defaults to False. _cli_enforce_required: Enforce required fields at the CLI. Defaults to False. _cli_use_class_docs_for_groups: Use class docstrings in CLI group help text instead of field descriptions. Defaults to False. _cli_exit_on_error: Determines whether or not the internal parser exits with error info when an error occurs. Defaults to True. _cli_prefix: The root parser command line arguments prefix. Defaults to ““. _cli_flag_prefix_char: The flag prefix character to use for CLI optional arguments. Defaults to ‘-’. _cli_implicit_flags: Whether bool fields should be implicitly converted into CLI boolean flags. (e.g. –flag, –no-flag). Defaults to False. _cli_ignore_unknown_args: Whether to ignore unknown CLI args and parse only known ones. Defaults to False. _cli_kebab_case: CLI args use kebab case. Defaults to False. _cli_shortcuts: Mapping of target field name to alias names. Defaults to None. _secrets_dir: The secret files directory or a sequence of directories. Defaults to None.*\n\nsource\n\n\nGitSource\n\n GitSource (_case_sensitive:bool|None=None,\n            _nested_model_default_partial_update:bool|None=None,\n            _env_prefix:str|None=None,\n            _env_file:DotenvType|None=Path('.'),\n            _env_file_encoding:str|None=None,\n            _env_ignore_empty:bool|None=None,\n            _env_nested_delimiter:str|None=None,\n            _env_nested_max_split:int|None=None,\n            _env_parse_none_str:str|None=None,\n            _env_parse_enums:bool|None=None, _cli_prog_name:str|None=None,\n            _cli_parse_args:bool|list[str]|tuple[str,...]|None=None,\n            _cli_settings_source:CliSettingsSource[Any]|None=None,\n            _cli_parse_none_str:str|None=None,\n            _cli_hide_none_type:bool|None=None,\n            _cli_avoid_json:bool|None=None,\n            _cli_enforce_required:bool|None=None,\n            _cli_use_class_docs_for_groups:bool|None=None,\n            _cli_exit_on_error:bool|None=None, _cli_prefix:str|None=None,\n            _cli_flag_prefix_char:str|None=None,\n            _cli_implicit_flags:bool|None=None,\n            _cli_ignore_unknown_args:bool|None=None,\n            _cli_kebab_case:bool|None=None,\n            _cli_shortcuts:Mapping[str,str|list[str]]|None=None,\n            _secrets_dir:PathType|None=None, name:str,\n            doc_dir:pathlib.Path, repo:str, commit:str)\n\n*Base class for settings, allowing values to be overridden by environment variables.\nThis is useful in production for secrets you do not wish to save in code, it plays nicely with docker(-compose), Heroku and any 12 factor app design.\nAll the below attributes can be set via model_config.\nArgs: _case_sensitive: Whether environment and CLI variable names should be read with case-sensitivity. Defaults to None. _nested_model_default_partial_update: Whether to allow partial updates on nested model default object fields. Defaults to False. _env_prefix: Prefix for all environment variables. Defaults to None. _env_file: The env file(s) to load settings values from. Defaults to Path(''), which means that the value from model_config['env_file'] should be used. You can also pass None to indicate that environment variables should not be loaded from an env file. _env_file_encoding: The env file encoding, e.g. 'latin-1'. Defaults to None. _env_ignore_empty: Ignore environment variables where the value is an empty string. Default to False. _env_nested_delimiter: The nested env values delimiter. Defaults to None. _env_nested_max_split: The nested env values maximum nesting. Defaults to None, which means no limit. _env_parse_none_str: The env string value that should be parsed (e.g. “null”, “void”, “None”, etc.) into None type(None). Defaults to None type(None), which means no parsing should occur. _env_parse_enums: Parse enum field names to values. Defaults to None., which means no parsing should occur. _cli_prog_name: The CLI program name to display in help text. Defaults to None if _cli_parse_args is None. Otherwise, defaults to sys.argv[0]. _cli_parse_args: The list of CLI arguments to parse. Defaults to None. If set to True, defaults to sys.argv[1:]. _cli_settings_source: Override the default CLI settings source with a user defined instance. Defaults to None. _cli_parse_none_str: The CLI string value that should be parsed (e.g. “null”, “void”, “None”, etc.) into None type(None). Defaults to _env_parse_none_str value if set. Otherwise, defaults to “null” if _cli_avoid_json is False, and “None” if _cli_avoid_json is True. _cli_hide_none_type: Hide None values in CLI help text. Defaults to False. _cli_avoid_json: Avoid complex JSON objects in CLI help text. Defaults to False. _cli_enforce_required: Enforce required fields at the CLI. Defaults to False. _cli_use_class_docs_for_groups: Use class docstrings in CLI group help text instead of field descriptions. Defaults to False. _cli_exit_on_error: Determines whether or not the internal parser exits with error info when an error occurs. Defaults to True. _cli_prefix: The root parser command line arguments prefix. Defaults to ““. _cli_flag_prefix_char: The flag prefix character to use for CLI optional arguments. Defaults to ‘-’. _cli_implicit_flags: Whether bool fields should be implicitly converted into CLI boolean flags. (e.g. –flag, –no-flag). Defaults to False. _cli_ignore_unknown_args: Whether to ignore unknown CLI args and parse only known ones. Defaults to False. _cli_kebab_case: CLI args use kebab case. Defaults to False. _cli_shortcuts: Mapping of target field name to alias names. Defaults to None. _secrets_dir: The secret files directory or a sequence of directories. Defaults to None.*\n\nsource\n\n\nSource\n\n Source (_case_sensitive:bool|None=None,\n         _nested_model_default_partial_update:bool|None=None,\n         _env_prefix:str|None=None, _env_file:DotenvType|None=Path('.'),\n         _env_file_encoding:str|None=None,\n         _env_ignore_empty:bool|None=None,\n         _env_nested_delimiter:str|None=None,\n         _env_nested_max_split:int|None=None,\n         _env_parse_none_str:str|None=None,\n         _env_parse_enums:bool|None=None, _cli_prog_name:str|None=None,\n         _cli_parse_args:bool|list[str]|tuple[str,...]|None=None,\n         _cli_settings_source:CliSettingsSource[Any]|None=None,\n         _cli_parse_none_str:str|None=None,\n         _cli_hide_none_type:bool|None=None,\n         _cli_avoid_json:bool|None=None,\n         _cli_enforce_required:bool|None=None,\n         _cli_use_class_docs_for_groups:bool|None=None,\n         _cli_exit_on_error:bool|None=None, _cli_prefix:str|None=None,\n         _cli_flag_prefix_char:str|None=None,\n         _cli_implicit_flags:bool|None=None,\n         _cli_ignore_unknown_args:bool|None=None,\n         _cli_kebab_case:bool|None=None,\n         _cli_shortcuts:Mapping[str,str|list[str]]|None=None,\n         _secrets_dir:PathType|None=None, name:str, doc_dir:pathlib.Path)\n\n*Base class for settings, allowing values to be overridden by environment variables.\nThis is useful in production for secrets you do not wish to save in code, it plays nicely with docker(-compose), Heroku and any 12 factor app design.\nAll the below attributes can be set via model_config.\nArgs: _case_sensitive: Whether environment and CLI variable names should be read with case-sensitivity. Defaults to None. _nested_model_default_partial_update: Whether to allow partial updates on nested model default object fields. Defaults to False. _env_prefix: Prefix for all environment variables. Defaults to None. _env_file: The env file(s) to load settings values from. Defaults to Path(''), which means that the value from model_config['env_file'] should be used. You can also pass None to indicate that environment variables should not be loaded from an env file. _env_file_encoding: The env file encoding, e.g. 'latin-1'. Defaults to None. _env_ignore_empty: Ignore environment variables where the value is an empty string. Default to False. _env_nested_delimiter: The nested env values delimiter. Defaults to None. _env_nested_max_split: The nested env values maximum nesting. Defaults to None, which means no limit. _env_parse_none_str: The env string value that should be parsed (e.g. “null”, “void”, “None”, etc.) into None type(None). Defaults to None type(None), which means no parsing should occur. _env_parse_enums: Parse enum field names to values. Defaults to None., which means no parsing should occur. _cli_prog_name: The CLI program name to display in help text. Defaults to None if _cli_parse_args is None. Otherwise, defaults to sys.argv[0]. _cli_parse_args: The list of CLI arguments to parse. Defaults to None. If set to True, defaults to sys.argv[1:]. _cli_settings_source: Override the default CLI settings source with a user defined instance. Defaults to None. _cli_parse_none_str: The CLI string value that should be parsed (e.g. “null”, “void”, “None”, etc.) into None type(None). Defaults to _env_parse_none_str value if set. Otherwise, defaults to “null” if _cli_avoid_json is False, and “None” if _cli_avoid_json is True. _cli_hide_none_type: Hide None values in CLI help text. Defaults to False. _cli_avoid_json: Avoid complex JSON objects in CLI help text. Defaults to False. _cli_enforce_required: Enforce required fields at the CLI. Defaults to False. _cli_use_class_docs_for_groups: Use class docstrings in CLI group help text instead of field descriptions. Defaults to False. _cli_exit_on_error: Determines whether or not the internal parser exits with error info when an error occurs. Defaults to True. _cli_prefix: The root parser command line arguments prefix. Defaults to ““. _cli_flag_prefix_char: The flag prefix character to use for CLI optional arguments. Defaults to ‘-’. _cli_implicit_flags: Whether bool fields should be implicitly converted into CLI boolean flags. (e.g. –flag, –no-flag). Defaults to False. _cli_ignore_unknown_args: Whether to ignore unknown CLI args and parse only known ones. Defaults to False. _cli_kebab_case: CLI args use kebab case. Defaults to False. _cli_shortcuts: Mapping of target field name to alias names. Defaults to None. _secrets_dir: The secret files directory or a sequence of directories. Defaults to None.*\n\n\nWorking with git\n\nsource\n\n\nclone_repo\n\n clone_repo (source:__main__.GitSource)\n\n*Clone a git repository if it doesn’t exist, or ensure an existing one is clean and at the specified commit.\nArgs: source (GitSource): Configuration object containing the repository URL, name, and target commit.\nReturns: None\nWill raise exceptions on errors*\n\nsource\n\n\ngit_progress\n\n git_progress (op_code, cur_count, max_count=None, message='')",
    "crumbs": [
      "Utils"
    ]
  },
  {
    "objectID": "web-generator.html",
    "href": "web-generator.html",
    "title": "Web Generator",
    "section": "",
    "text": "output_dir = settings.output_dir\nweb_dir = settings.project_root / \"web\"\n\nprint(f\"Output directory: {output_dir}\")\nprint(f\"Web directory: {web_dir}\")\n\nOutput directory: ../processed_documents\nWeb directory: /home/xl0/work/projects/lovely-docs/web\n\n\n\nsource\n\nscan_libraries\n\n scan_libraries (output_dir:pathlib.Path)\n\nScan the output directory for processed libraries\n\nlibraries = scan_libraries(output_dir)\nprint(f\"Found {len(libraries)} libraries:\")\nfor name, info in libraries.items():\n    print(f\"  - {name}: {info['statistics'].get('relevant_pages', 0)} pages\")\n\nFound 1 libraries:\n  - sveltejs-svelte: 9 pages\n\n\n\nsource\n\n\nbuild_directory_tree\n\n build_directory_tree (base_path:pathlib.Path,\n                       current_path:pathlib.Path=None)\n\nRecursively build a tree structure from the filesystem\n\n# Test building tree for sveltejs-svelte\nif \"sveltejs-svelte\" in libraries:\n    lib_path = libraries[\"sveltejs-svelte\"][\"path\"]\n    root_name = libraries[\"sveltejs-svelte\"][\"root_directory\"].get(\"better_name\", \"root\").replace(\" \", \"_\")\n    tree_root = lib_path / root_name\n\n    tree = build_directory_tree(lib_path, tree_root)\n    print(json.dumps(tree, indent=2))\n\n{\n  \"name\": \"root\",\n  \"better_name\": \"svelte-reactivity-system\",\n  \"one_line_summary\": \"Svelte 5 runes are $ -prefixed compiler keywords that control reactivity, state management, derived values, effects, and component binding.\",\n  \"path\": \"svelte-reactivity-system\",\n  \"pages\": [],\n  \"subdirs\": [\n    {\n      \"name\": \"02-runes\",\n      \"better_name\": \"svelte-runes-reference\",\n      \"one_line_summary\": \"Runes are built-in compiler keywords that provide reactive state, derived values, side-effects, props, and debugging utilities for Svelte 5 applications.\",\n      \"path\": \"svelte-reactivity-system/svelte-runes-reference\",\n      \"pages\": [\n        {\n          \"name\": \"runes-overview.md\",\n          \"one_line_summary\": \"Runes are $ -prefixed compiler keywords in Svelte that control the compiler behavior, similar to language syntax rather than regular functions.\",\n          \"path\": \"svelte-reactivity-system/svelte-runes-reference/runes-overview\"\n        },\n        {\n          \"name\": \"state-rune-guide.md\",\n          \"one_line_summary\": \"The $state rune creates reactive state that updates the UI automatically, with deep reactivity for objects/arrays and variants for raw state and snapshots.\",\n          \"path\": \"svelte-reactivity-system/svelte-runes-reference/state-rune-guide\"\n        },\n        {\n          \"name\": \"derived_rune.md\",\n          \"one_line_summary\": \"$derived rune creates automatic calculated state that recalculates when dependencies change, with support for complex logic and optimistic UI patterns.\",\n          \"path\": \"svelte-reactivity-system/svelte-runes-reference/derived_rune\"\n        },\n        {\n          \"name\": \"$effect-rune-guide.md\",\n          \"one_line_summary\": \"$effect rune for running side effects when reactive state changes, with automatic dependency tracking and lifecycle management.\",\n          \"path\": \"svelte-reactivity-system/svelte-runes-reference/$effect-rune-guide\"\n        },\n        {\n          \"name\": \"component-props-rune.md\",\n          \"one_line_summary\": \"The `$props` rune receives and destructures component inputs with support for defaults, renaming, and type safety.\",\n          \"path\": \"svelte-reactivity-system/svelte-runes-reference/component-props-rune\"\n        },\n        {\n          \"name\": \"bindable-props-bidirectional-data-flow.md\",\n          \"one_line_summary\": \"The $bindable rune enables two-way data binding on component props, allowing child components to update parent state when used with the bind: directive.\",\n          \"path\": \"svelte-reactivity-system/svelte-runes-reference/bindable-props-bidirectional-data-flow\"\n        },\n        {\n          \"name\": \"$inspect-rune-debugging\",\n          \"one_line_summary\": \"Development debugging rune that logs reactive state changes and can trace what causes effects/derived values to re-run.\",\n          \"path\": \"svelte-reactivity-system/svelte-runes-reference/$inspect-rune-debugging\"\n        },\n        {\n          \"name\": \"host-element-access.md\",\n          \"one_line_summary\": \"The $host rune allows custom element components to access their host element and dispatch events to parent consumers.\",\n          \"path\": \"svelte-reactivity-system/svelte-runes-reference/host-element-access\"\n        },\n        {\n          \"name\": \"runes.md\",\n          \"one_line_summary\": \"Documentation index page for runes.\",\n          \"path\": \"svelte-reactivity-system/svelte-runes-reference/runes\"\n        }\n      ],\n      \"subdirs\": []\n    }\n  ]\n}\n\n\n\nsource\n\n\ngenerate_pages_recursive\n\n generate_pages_recursive (source_root:pathlib.Path,\n                           current_path:pathlib.Path,\n                           web_root:pathlib.Path, lib_key:str,\n                           library_list_html:str, nav_tree_html:str, md,\n                           root_dir_name:str)\n\nRecursively generate HTML pages for all documents\n\nsource\n\n\ngenerate_nav_node_html\n\n generate_nav_node_html (node, lib_key, root_dir_name)\n\nGenerate HTML for a navigation node with absolute paths and Tailwind classes\n\nsource\n\n\ngenerate_nav_tree_html\n\n generate_nav_tree_html (tree, lib_key, root_dir_name)\n\nGenerate navigation tree HTML with absolute paths\n\nsource\n\n\ngenerate_website\n\n generate_website (output_dir:pathlib.Path, web_dir:pathlib.Path)\n\nGenerate fully static website from processed documentation\n\n# Generate the website\ngenerate_website(output_dir, web_dir)\n\nWebsite generated at: /home/xl0/work/projects/lovely-docs/web\nOpen /home/xl0/work/projects/lovely-docs/web/index.html in your browser\n\n\n\nimport subprocess\nimport os\n\n\n# Serve the website with a simple HTTP server\n\n\nprint(f\"Starting server at http://localhost:8000\")\nprint(f\"Serving from: {web_dir}\")\nprint(\"Press Ctrl+C to stop\")\n\nos.chdir(web_dir)\nsubprocess.run([\"python\", \"-m\", \"http.server\", \"8000\"])\n\nStarting server at http://localhost:8000\nServing from: /home/xl0/work/projects/lovely-docs/web\nPress Ctrl+C to stop\nServing HTTP on 0.0.0.0 port 8000 (http://0.0.0.0:8000/) ...\n\n\n127.0.0.1 - - [24/Oct/2025 19:51:06] \"GET /sveltejs-svelte/svelte-runes-reference/state-rune-guide/index.html HTTP/1.1\" 200 -\n127.0.0.1 - - [24/Oct/2025 19:51:06] \"GET /script.js HTTP/1.1\" 200 -\n\n\n\nKeyboard interrupt received, exiting.\n\n\n\n---------------------------------------------------------------------------\nKeyboardInterrupt                         Traceback (most recent call last)\nCell In[12], line 10\n      7 print(\"Press Ctrl+C to stop\")\n      9 os.chdir(web_dir)\n---&gt; 10 subprocess.run([\"python\", \"-m\", \"http.server\", \"8000\"])\n\nFile ~/mambaforge/envs/docs/lib/python3.13/subprocess.py:556, in run(input, capture_output, timeout, check, *popenargs, **kwargs)\n    554 with Popen(*popenargs, **kwargs) as process:\n    555     try:\n--&gt; 556         stdout, stderr = process.communicate(input, timeout=timeout)\n    557     except TimeoutExpired as exc:\n    558         process.kill()\n\nFile ~/mambaforge/envs/docs/lib/python3.13/subprocess.py:1214, in Popen.communicate(self, input, timeout)\n   1212         stderr = self.stderr.read()\n   1213         self.stderr.close()\n-&gt; 1214     self.wait()\n   1215 else:\n   1216     if timeout is not None:\n\nFile ~/mambaforge/envs/docs/lib/python3.13/subprocess.py:1280, in Popen.wait(self, timeout)\n   1278     endtime = _time() + timeout\n   1279 try:\n-&gt; 1280     return self._wait(timeout=timeout)\n   1281 except KeyboardInterrupt:\n   1282     # https://bugs.python.org/issue25942\n   1283     # The first keyboard interrupt waits briefly for the child to\n   1284     # exit under the common assumption that it also received the ^C\n   1285     # generated SIGINT and will exit rapidly.\n   1286     if timeout is not None:\n\nFile ~/mambaforge/envs/docs/lib/python3.13/subprocess.py:2066, in Popen._wait(self, timeout)\n   2064 if self.returncode is not None:\n   2065     break  # Another thread waited.\n-&gt; 2066 (pid, sts) = self._try_wait(0)\n   2067 # Check the pid and loop as waitpid has been known to\n   2068 # return 0 even without WNOHANG in odd situations.\n   2069 # http://bugs.python.org/issue14396.\n   2070 if pid == self.pid:\n\nFile ~/mambaforge/envs/docs/lib/python3.13/subprocess.py:2024, in Popen._try_wait(self, wait_flags)\n   2022 \"\"\"All callers to this function MUST hold self._waitpid_lock.\"\"\"\n   2023 try:\n-&gt; 2024     (pid, sts) = os.waitpid(self.pid, wait_flags)\n   2025 except ChildProcessError:\n   2026     # This happens if SIGCLD is set to be ignored or waiting\n   2027     # for child processes has otherwise been disabled for our\n   2028     # process.  This child is dead, we can't get the status.\n   2029     pid = self.pid\n\nKeyboardInterrupt:",
    "crumbs": [
      "Web Generator"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "lovely-docs",
    "section": "",
    "text": "This file will become your README and also the index of your documentation.",
    "crumbs": [
      "lovely-docs"
    ]
  },
  {
    "objectID": "index.html#developer-guide",
    "href": "index.html#developer-guide",
    "title": "lovely-docs",
    "section": "Developer Guide",
    "text": "Developer Guide\nIf you are new to using nbdev here are some useful pointers to get you started.\n\nInstall lovely_docs in Development mode\n# make sure lovely_docs package is installed in development mode\n$ pip install -e .\n\n# make changes under nbs/ directory\n# ...\n\n# compile to have changes apply to lovely_docs\n$ nbdev_prepare",
    "crumbs": [
      "lovely-docs"
    ]
  },
  {
    "objectID": "index.html#usage",
    "href": "index.html#usage",
    "title": "lovely-docs",
    "section": "Usage",
    "text": "Usage\n\nInstallation\nInstall latest from the GitHub repository:\n$ pip install git+https://github.com/xl0/lovely-docs.git\nor from conda\n$ conda install -c xl0 lovely_docs\nor from pypi\n$ pip install lovely_docs\n\n\nDocumentation\nDocumentation can be found hosted on this GitHub repository’s pages. Additionally you can find package manager specific guidelines on conda and pypi respectively.",
    "crumbs": [
      "lovely-docs"
    ]
  },
  {
    "objectID": "index.html#how-to-use",
    "href": "index.html#how-to-use",
    "title": "lovely-docs",
    "section": "How to use",
    "text": "How to use\nFill me in please! Don’t forget code examples:\n\n1+1\n\n2",
    "crumbs": [
      "lovely-docs"
    ]
  }
]